// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.29.0
// source: calculation_history.sql

package calculation_history

import (
	"context"
	"time"

	"github.com/lib/pq"
	"github.com/sqlc-dev/pqtype"
)

const insert = `-- name: Insert :exec
INSERT INTO calculation_history
    (operation_id, operation_type, operands, result, precision, timestamp, metadata)
VALUES
    ($1, $2, $3,$4,$5,$6,$7)
`

type InsertParams struct {
	OperationID   string
	OperationType string
	Operands      []float64
	Result        float64
	Precision     int32
	Timestamp     time.Time
	Metadata      pqtype.NullRawMessage
}

func (q *Queries) Insert(ctx context.Context, arg InsertParams) error {
	_, err := q.db.ExecContext(ctx, insert,
		arg.OperationID,
		arg.OperationType,
		pq.Array(arg.Operands),
		arg.Result,
		arg.Precision,
		arg.Timestamp,
		arg.Metadata,
	)
	return err
}

const queryAll = `-- name: QueryAll :many
SELECT operation_id, operation_type, operands, result, precision, timestamp, metadata FROM calculation_history
`

func (q *Queries) QueryAll(ctx context.Context) ([]CalculationHistory, error) {
	rows, err := q.db.QueryContext(ctx, queryAll)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []CalculationHistory
	for rows.Next() {
		var i CalculationHistory
		if err := rows.Scan(
			&i.OperationID,
			&i.OperationType,
			pq.Array(&i.Operands),
			&i.Result,
			&i.Precision,
			&i.Timestamp,
			&i.Metadata,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
